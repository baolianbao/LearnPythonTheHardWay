## 练习48-高级用户输入
你的游戏估计运行良好,但你的用户输入系统估计还不健全.每个房间都拥有独特的口令集,并且在用户完美键入的情况下才能起效. 我们希望用户通过多样化的输入口令来控制游戏.比如说,下面这三种口令,意义是差不多的:
* Open the door
* Open door
* Go through the door  

下面两句意思也差不多:
* Punch bear
* Punch the bear in the face  

你设计的游戏应该允许用户输入一些很像英文的指令,并且能准确识别口令的含义.为了做到这一点,你需要写一个模块来实现.这个模块应该包含一些类,可以处理用户输入的内容并将其转换成游戏程序可以运行的指令. 下面是一些简化的英文版规则:
* 单词用空格分开
* 句子由单词构成
* 语法负责组织句子形成意义  

这意味着最好的突破点事找出如何获得用户输入的单词,并弄清楚这些单词是什么类型.
### 我们的游戏词典
在游戏中,我们需要创建一个词典:
* 方向词汇: North , south , east , west , down, up, left, right, back
* 动词: Go, stop, kill, eat
* 停止指令: The, in, of, from, at, it
* 单词: Door, bear, princess,  cabinet
* 数量词: 0-9  

当我们接触单词的时候,会有一个小问题,因为每一个房间都会有一个不同单词集合,不管它,先让我们运行起来,稍后再改进.  

### 分解语句
一旦我们有了集,我们需要通过一种方式来分解语句,明白它表达的含义,在本节案例中,我们定义为"单词由空格分隔",所以只需要这样做:
```
stuff = raw_input('> ')
words = stuff.split()

```
### 词典元组
一旦我们了解如何将一个句子分解成单词,我们只用按照列表将所有单词过一遍,然后确定每个单词的类型是什么.为了实现这个目的,我们需要用到一个方便小巧的Python 结构叫做`Tuple(元组)`, `tuple`除了不能修改,其他方面跟` list`没什么不同.创建方法是把数据放到`()`内,并用`,`隔开,比如下面这样:
```py
first_word = ('direction', 'north')
second_word = ('verb', 'go')
sentence = [first_word, second_word]
```
上面这种形式是创建了一个组合(类型,单词),方便你读取并处理它.  

上面这段代码只是示例,但基本上算是最终结果了.你想通过` raw input`获取用户的输入,然后用` split`切割成单词,接着分析这些单词并识别是何种类型,最终再组合成句子.

### 扫描输入
现在你已经准备编写你的扫描器了.这个扫描器从用户那获取一个字符串并返回一个由元组(TOKEN,WORD)组成的句子.如果发现某个单词未包含在词典中,那么这个单词的 WORD也会返回,但是 TOKEN 会提示 ERROR, 这些错误的 token 会提示用户他们输入有误.

还是老规矩,我来告诉你怎么做,而不是直接给你代码.  

### 例外和数字
这还有一件小事,我得先告诉你.关于"转换数字",为了做这个,我们得进行哄骗并使用`例外`.`例外`实际上是函数运行中的一个错误,你要搞明白函数为什么会遇到这个错误,才能处理这个错误.举个例子,你在 Python 中输入下面的命令试一下:  
```py
David$ python
Python 2.7.10 (default, Feb  7 2017, 00:08:15)
[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> int("hell")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: 'hell'
```
上面的` ValueError`就是` int()`函数的一个例外,因为`hell`并不是整数.`int()`并没有让你逐个尝试哪种输入是例外,它直接给出了`ValueError`,交给你来处理.  

你可以用 `try`和`例外关键词`来处理.  
```py
def convert_number(s)
    try:
      return int(s)
    except ValueError:
      return None
```
你将这段代码放进` try block`里,来测试可能出现的错误. **在你写的扫描器里,你应该使用一个函数来测试某些数字的东西.**  本节的练习内容,你可以依葫芦画瓢放到你的新项目里,但是不要单纯地复制粘贴,然后编写你自己的扫描器来测试.时刻注意细节,并确保一切环节运转正常.


### 设计提示
每次聚焦于测试一个部分.保持简单并将所有词典中的单词都放到` lexicon.py`模块中.不要更改这个单词输入列表,但是可以用词典元组创建新的列表.  

### 课程训练
1. 改善测试单元确保能覆盖所有词典
2. 添加一些新词,然后更新测试单元
3. 确保你的扫描器在输入任何的大小写字母或符号都能正常工作
4. 再找一种新的方法来转换数字
5. 我的解决方案用了37行代码,你能否把它缩减到更短.
